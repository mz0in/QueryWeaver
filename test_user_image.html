<!DOCTYPE html>
<html>
<head>
    <title>Test User Image</title>
    <style>
        /* Simplified CSS for testing */
        .user-message-container::before {
            content: attr(data-user-label);
            width: 40px;
            height: 40px;
            background: #ccc;
            border-radius: 50%;
            display: inline-block;
            text-align: center;
            line-height: 40px;
            margin-right: 10px;
        }

        .user-message-container[data-user-image]::before {
            content: "";
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .message-container {
            margin: 10px 0;
            display: flex;
            align-items: center;
        }
    </style>
</head>
<body>
    <h1>User Image Test</h1>
    
    <!-- Test with image -->
    <div class="message-container user-message-container" data-user-image="https://via.placeholder.com/40">
        <span>Message with image</span>
    </div>
    
    <!-- Test with text label -->
    <div class="message-container user-message-container" data-user-label="J">
        <span>Message with text label</span>
    </div>

    <script>
        // Simulate the dynamic style injection for image
        function setUserImage(container, imageUrl) {
            const style = document.createElement('style');
            const containerClass = 'user-image-' + Date.now();
            container.classList.add(containerClass);
            style.textContent = `.${containerClass}::before { background-image: url('${imageUrl}') !important; }`;
            document.head.appendChild(style);
        }

        // Apply to the image container
        const imageContainer = document.querySelector('[data-user-image]');
        if (imageContainer) {
            setUserImage(imageContainer, imageContainer.getAttribute('data-user-image'));
        }
    </script>
</body>
</html>
